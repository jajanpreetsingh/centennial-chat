<app-menu></app-menu>

<div class="container-fluid" id="discussion-section">
  <div class="row">
    <div class="col-sm-1"></div>
    <div class="col-sm-6">
      <div class="topic-area">
        <h4>{{chatData.title}}</h4><h4 *ngIf="hubInstance.publishedQuestion"> - {{hubInstance.publishedQuestion.content}}</h4>
        <span class="participants">10</span>
      </div>
      <div id="discussion">
        <div class="comments-container">
          <ul id="comments-list" class="comments-list">
            <li *ngFor="let message of hubInstance.messages">
              <div *ngIf="!message.isMine" class="comment-main-level">

                <div class="comment-avatar col-sm-1"><img src="../../assets/icons/pngs/{{message.sender}}.png" alt="{{message.sender}}"></div>

                <div class="comment-box col-sm-10">
                  <div class="comment-head">
                    <h6 class="comment-name by-author">{{message.sender}}</h6>
                    <span>Sent on : {{message.sendDate}}</span>
                    <i class="fa fa-thumbs-o-up" [@seventyFiveAnimation]='stateSeventyFive' [@fiftyAnimation]='stateFifty'></i>
                    <span class="f-right">5</span>
                    <i class="fa fa-thumbs-o-down" [@seventyFiveAnimation]='stateSeventyFive' [@fiftyAnimation]='stateFifty'></i>
                    <span class="f-right">5</span>
                    <i class="fa fa-volume-up" (click)="playAudio(message)" aria-hidden="true"></i>
                  </div>
                  <div class="comment-content">{{message.content}}</div>
                </div>
              </div>

              <div *ngIf="message.isMine" class="comment-main-level your-message">

                <div class="comment-avatar col-sm-1"><img src="../../assets/icons/pngs/{{message.sender}}.png" alt="{{message.sender}}"></div>

                <div class="comment-box col-sm-10">
                  <div class="comment-head">
                    <h6 class="comment-name">{{message.sender}}</h6>
                    <span>Sent on : {{message.sendDate}}</span>
                    <i class="fa fa-thumbs-o-up" [@seventyFiveAnimation]='stateSeventyFive' [@fiftyAnimation]='stateFifty'></i>
                    <span class="f-right">5</span>
                    <i class="fa fa-thumbs-o-down" [@seventyFiveAnimation]='stateSeventyFive' [@fiftyAnimation]='stateFifty'></i>
                    <span class="f-right">5</span>
                    <i class="fa fa-volume-up" (click)="playAudio(message)" aria-hidden="true"></i>
                  </div>
                  <div class="comment-content">{{message.content}}</div>
                </div>
              </div>
          </ul>
        </div>
      </div>
    </div>
    <div class="col-sm-4" id="input-messsage">

      <div *ngIf="hubInstance.publishedQuestion">
        <h4><span>Q</span>{{hubInstance.publishedQuestion.content}}</h4>
        <div *ngIf="hubInstance.publishedQuestion.isPollingQuestion">
          <span *ngFor="let option of hubInstance.publishedQuestion.options">
            <input type="checkbox" value="{{option}}" [checked]="selectedOptions.indexOf(option) >= 0" (change)="onOptionSelect(option)" />{{option}}
          </span>
        </div>
        <div *ngIf="!hubInstance.publishedQuestion.isPollingQuestion">
          <textarea [(ngModel)]="message" name="message" rows="10" cols="45"></textarea>
          <i *ngIf="!isListening" (click)="startListening()" class="fa fa-microphone" aria-hidden="true"></i>
          <i *ngIf="isListening" (click)="stopListening()" class="fa fa-microphone" aria-hidden="true"></i>
        </div>
        <button class="btn" (click)="submitAnswer()">Submit</button>
        <hr />
      </div>

      <div class="fitted-container">
        <h4>Answer</h4>
        <p>Characters remaining : {{250 - (message!=null && message!=''?message.length:0)}}</p>
        <form>
          <div id="textarea-container">
            <textarea [(ngModel)]="message" name="message" rows="10" cols="45"></textarea>
            <i *ngIf="!isListening" (click)="startListening()" class="fa fa-microphone" aria-hidden="true"></i>
            <i *ngIf="isListening" (click)="stopListening()" class="fa fa-microphone" aria-hidden="true"></i>
          </div>
          <button class="btn btn-lg" (click)="sendMessage()">Post</button>

          <button class="btn btn-lg" (click)="animateMeFifty()">test 50%</button>
          <button class="btn btn-lg" (click)="animateMeSeventyFive()">test 75%</button>
        </form>
      </div>
    </div>
    <div class="col-sm-1">
    </div>
  </div>
  <div id="count-stud">
    <i class="fa fa-user" aria-hidden="true"></i>
    35
  </div>
</div>

<app-footer></app-footer>
